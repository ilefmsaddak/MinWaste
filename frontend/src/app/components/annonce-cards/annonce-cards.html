<div class="cards-container" [id]="sectionId">
  <h2 class="section-title">{{ sectionTitle }}</h2>
  
  @if (isLoading()) {
    <div class="loading">Loading announcements...</div>
  } @else if (error()) {
    <div class="error">{{ error() }}</div>
  } @else {
    <div class="cards-scroll">
      @for (annonce of annonces(); track annonce.id) {
        <div class="card">
          <!-- Image -->
          <div class="card-image">
            <img [src]="getPhotoUrl(annonce.photos)" [alt]="annonce.title">
            <span class="status-badge" [ngClass]="'status-' + annonce.status.toLowerCase()">
              {{ getStatusLabel(annonce.status) }}
            </span>
          </div>

          <!-- Card Content -->
          <div class="card-content">
            <div class="card-category">{{ annonce.category }}</div>
            
            <h3 class="card-title">{{ annonce.title }}</h3>

            <!-- Location -->
            @if (annonce.location) {
              <div class="card-location">
                <span class="location-icon">üìç</span>
                <span class="location-text">{{ annonce.location.addr }}</span>
              </div>
            }

            <!-- Expiry Date Warning -->
            @if (annonce.expiresAt) {
              <div class="expiry-warning" [ngClass]="{'expiring-soon': isExpiringSoon(annonce.expiresAt), 'expired': isExpired(annonce.expiresAt)}">
                ‚è∞ {{ getExpiryLabel(annonce.expiresAt) }}
              </div>
            }

            <!-- Footer with Price and Time -->
            <div class="card-footer">
              <div class="price-section">
                @if (annonce.priceType === 'free') {
                  <span class="badge-free">Free</span>
                } @else {
                  <div class="price-info">
                    <span class="price-amount">{{ annonce.priceAmount | number: '1.2-2' }} DT</span>
                    <span class="price-type">{{ getPriceLabel(annonce.priceType) }}</span>
                  </div>
                }
              </div>
              <span class="time-ago">{{ getTimeAgo(annonce.createdAt) }}</span>
            </div>

            <!-- Action Button -->
            <button class="view-btn">View More</button>
          </div>
        </div>
      }
    </div>
  }
</div>
